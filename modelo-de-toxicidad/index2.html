<!DOCTYPE html>
<html>
  <head>
    <title>Modelo de toxicidad</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.0.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/toxicity@1.2.2"></script>
  </head>
  <body>
    <h2>
        Modelo de toxicidad
    </h2>

    <input type="text" id="textInput">
    <button onclick="handleInput()">analizar</button>

    <script>
        //Funcion que agarra el texto y lo pasa al modelo
        async function handleInput(){
        // minimum positive prediction confidence
        // If this isn't passed, the default is 0.85
        //Carga el modelo de toxicidad con un umbral de confianza de predicciÃ³n positiva de 0.5
        const threshold = 0.5
        const sentences = document.getElementById('textInput').value;
        toxicity.load(threshold).then((model) => {

          //Devuelve las predicciones del modelo para el texto.
          model.classify(sentences).then((predictions) => {
            // semi-pretty-print results
            console.log(JSON.stringify(predictions, null, 2))
          })
        })
        }
    </script>
  </body>
</html>
